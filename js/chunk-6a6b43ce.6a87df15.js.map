{"version":3,"sources":["webpack:///./src/views/charts/Canvas.vue?1e6f","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/plugins/drawGeoJsonWithCanvas.js","webpack:///src/views/charts/Canvas.vue","webpack:///./src/views/charts/Canvas.vue?eafe","webpack:///./src/views/charts/Canvas.vue","webpack:///./src/views/charts/Canvas.vue?a2ba","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticRenderFns","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","defaultOptions","zoom","center","waterColor","landColor","markerColor","markerSize","DrawGeoJson","el","options","console","error","assign","init","log","geoJson","geojson","features","scale","Math","pow","parseInt","bounds","getBounds","width","clientWidth","height","clientHeight","map","createMap","context","getContext","appendChild","draw","document","createElement","style","position","top","left","fillStyle","coords","geometry","coordinates","j","point","coordinateToPoint","beginPath","moveTo","x","y","lineTo","stroke","latitude","longitude","projectCoordinate","xScale","abs","xMax","xMin","yScale","yMax","yMin","RADIUS","MAX","RADIANS","PI","max","min","tan","name","data","methods","mapInit","$nextTick","mounted","component","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-6a6b43ce.6a87df15.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map\"})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","const defaultOptions = {\n    zoom: 0,\n    center: [0, 0],\n    waterColor: '#b3d1ff',\n    landColor: '#f00',\n    markerColor: '#333',\n    markerSize: 5\n}\n\nclass DrawGeoJson {\n    constructor(el, options) {\n        if (!el) {\n            console.error('el is null')\n        }\n        this.options = Object.assign(defaultOptions, options);\n        this.el = el;\n        this.init();\n    }\n\n    init() {\n        console.log('this.options', this.options);\n        this.geoJson = this.options.geojson.features || this.options.geojson;\n        this.scale = Math.pow(2, parseInt(this.options.zoom));\n        this.bounds = this.getBounds();\n        console.log('bounds----', this.bounds, this.geoJson);\n        this.width = this.el.clientWidth;\n        this.height = this.el.clientHeight;\n\n        this.map = this.createMap(this.width, this.height);\n        this.context = this.map.getContext('2d');\n        this.el.appendChild(this.map);\n\n        this.draw();\n    }\n\n    createMap(width, height) {\n        const map = document.createElement('canvas');\n        map.width = width;\n        map.height = height;\n        map.style.position = 'absolute';\n        map.style.top = 0;\n        map.style.left = 0;\n        return map;\n    }\n\n    draw() {\n        this.context.fillStyle = this.options.landColor;\n        for (let i = 0; i < this.geoJson.length; i++) {\n            const coords = this.geoJson[i].geometry.coordinates[0];\n            for (let j = 0; j < coords.length; j++) {\n                const point = this.coordinateToPoint(coords[j][1], coords[j][0]);\n                // console.log('draw point', point);\n                if (j === 0) {\n                    this.context.beginPath();\n                    this.context.moveTo(point.x, point.y);\n                } else {\n                    this.context.lineTo(point.x, point.y);\n                }\n            }\n            this.context.stroke();\n        }\n    }\n\n    coordinateToPoint(latitude, longitude) {\n        const point = this.projectCoordinate(latitude, longitude);\n        // console.log('coordinateToPoint', point);\n        const xScale = this.width / Math.abs(this.bounds.xMax - this.bounds.xMin);\n        const yScale = this.height / Math.abs(this.bounds.yMax - this.bounds.yMin);\n        const scale = xScale < yScale ? xScale : yScale;\n\n\n        return {\n            x: (point.x - this.bounds.xMin) * scale,\n            y: (this.bounds.yMax - point.y) * scale\n        };\n    }\n\n    projectCoordinate(latitude, longitude) {\n        let point = {};\n        const RADIUS = 6378137;\n        const MAX = 85.0511287798;\n        const RADIANS = Math.PI / 180;\n\n        let x = RADIUS * longitude * RADIANS;\n        let y = Math.max(Math.min(MAX, latitude), -MAX) * RADIANS;\n        y = RADIUS * Math.log(Math.tan((Math.PI / 4) + (y / 2)));\n\n        point.x = x * this.scale;\n        point.y = y * this.scale;\n\n        return point;\n    }\n\n    getBounds() {\n        let bounds = {}, coords, point\n        for (let i = 0; i < this.geoJson.length; i++) {\n            coords = this.geoJson[i].geometry.coordinates[0];\n            for (let j = 0; j < coords.length; j++) {\n                point = this.projectCoordinate(coords[j][1], coords[j][0]);\n                bounds.xMin = bounds.xMin < point.x ? bounds.xMin : point.x;\n                bounds.xMax = bounds.xMax > point.x ? bounds.xMax : point.x;\n                bounds.yMin = bounds.yMin < point.y ? bounds.yMin : point.y;\n                bounds.yMax = bounds.yMax > point.y ? bounds.yMax : point.y;\n            }\n        }\n        return bounds\n    }\n\n}\n\nexport default DrawGeoJson","<template>\n  <div class=\"map\"></div>\n</template>\n\n<script>\nimport DrawGeoJson from '@/plugins/drawGeoJsonWithCanvas.js'\nimport jsonData from 'json/5101.json'\n\nexport default {\n  name: 'map',\n  data() {\n    return {}\n  },\n  methods: {\n    mapInit() {\n      this.$nextTick(() => {\n        const mapDom = document.body.querySelector('.map');\n        new DrawGeoJson(mapDom, {\n          geojson: jsonData\n        })\n      })\n    }\n  },\n  mounted() {\n    this.mapInit()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.map {\n  position: relative;\n  width: 500px;\n  height: 500px;\n  border: 1px solid red;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Canvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Canvas.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Canvas.vue?vue&type=template&id=184e2c38&scoped=true&\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js&\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Canvas.vue?vue&type=style&index=0&id=184e2c38&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"184e2c38\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Canvas.vue?vue&type=style&index=0&id=184e2c38&scoped=true&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}