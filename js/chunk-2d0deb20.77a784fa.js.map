{"version":3,"sources":["webpack:///./src/views/threejs/Demo.vue?8621","webpack:///src/views/threejs/Demo.vue","webpack:///./src/views/threejs/Demo.vue?9f4d","webpack:///./src/views/threejs/Demo.vue"],"names":["_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","attrs","name","methods","init","renderer","setPixelRatio","window","devicePixelRatio","setSize","innerWidth","innerHeight","container","appendChild","domElement","camera","position","set","renderByBox","materials","push","scene","add","box","geometry","scale","renderBySphere","sphereGeometry","sphere","console","log","controls","position0","onWindowResize","aspect","updateProjectionMatrix","render","x","y","z","shape","addEventListener","mounted","$nextTick","renderPoints","detail","sprite","hotPoints","i","poiObjects","event","preventDefault","mouse","clientY","document","body","clientHeight","raycaster","setFromCamera","intersects","length","alert","object","title","component"],"mappings":"yHAAA,IAAI,EAAS,WAAa,IAAIA,EAAIC,KAASC,EAAGF,EAAIG,eAAsBH,EAAII,MAAMC,GAAO,OAAOL,EAAIM,GAAG,IACnGC,EAAkB,CAAC,WAAa,IAAIP,EAAIC,KAASC,EAAGF,EAAIG,eAAmBE,EAAGL,EAAII,MAAMC,IAAIH,EAAG,OAAOG,EAAG,MAAM,CAACA,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,e,wBCU1I,GACEC,KAAM,SACNC,QAAS,CACPC,KADJ,WAEM,IAAN,mCACA,cACMC,EAASC,cAAcC,OAAOC,kBAE9BH,EAASI,QAAQF,OAAOG,WAAYH,OAAOI,aAC3CC,EAAUC,YAAYR,EAASS,YAG/B,IAAN,cACA,6DAGMC,EAAOC,SAASC,IAAI,EAAG,EAAG,IAS1B,IAAN,6BAQM,SAASC,IAUP,IATA,IAAR,GACA,4BACA,6BACA,2BACA,8BACA,6BACA,6BAEA,KACA,oBACU,IAAV,2BACUC,EAAUC,KAAK,IAAI,EAA7B,eAGQ,IAAR,kCACQC,EAAMC,IAAIC,GACVA,EAAIC,SAASC,MAAM,EAAG,GAAI,GAG5B,SAASC,IACP,IAAR,uBACQC,EAAeF,MAAM,EAAG,GAAI,GAE5B,IAAR,2DACA,sBAEA,kBACQJ,EAAMC,IAAIM,GAnCZC,QAAQC,IAAI,qBAAsBC,EAASC,UAAW,mBAAoBjB,EAAOC,UAsCjF,IAAN,QAQM,SAASiB,IACPlB,EAAOmB,OAAS3B,OAAOG,WAAaH,OAAOI,YAC3CI,EAAOoB,yBAEP9B,EAASI,QAAQF,OAAOG,WAAYH,OAAOI,aAc7C,SAASyB,IACP/B,EAAS+B,OAAOf,EAAON,GACvBc,QAAQC,IAAI,SAAUf,EAAOC,SAASqB,EAAGtB,EAAOC,SAASsB,EAAGvB,EAAOC,SAASuB,GAQ9E,MAnCc,QAAVC,EACFtB,IAEAQ,IAEFnB,OAAOkC,iBAAiB,SAAUR,GAyBlCG,IACAL,EAASU,iBAAiB,SAAUL,GAI7B,CAAb,gCAGEM,QAvGF,WAuGA,WACIhD,KAAKiD,WAAU,WAEb,IAAN,8CAEM,SAASC,IAyBP,IAxBA,IAAR,IACU5B,SAAU,CACRqB,EAAG,EACHC,EAAG,EACHC,GAAI,IAENM,OAAQ,CACN,MAAS,SAGrB,CACU,SAAV,CACY,GAAZ,GACY,GAAZ,IACY,EAAZ,IAEU,OAAV,CACY,MAAZ,UAGA,0CACA,uBAEA,KACA,oBACU,IAAV,iBACUC,EAAOrB,MAAMR,IAAI,GAAK,GAAK,IAC3B,IAAV,gBACUY,QAAQC,IAAI,WAAYd,GACxB8B,EAAO9B,SAASC,IAAID,EAASqB,EAAGrB,EAASsB,EAAGtB,EAASuB,GAErDlB,EAAMC,IAAIwB,GAEVA,EAAOD,OAASE,EAAUC,GAAGH,OAC7BI,EAAW7B,KAAK0B,GAElB,OAAOG,EAGT,IAAN,MACMrC,EAAU6B,iBAAiB,SAAS,SAAUS,GAC5CrB,QAAQC,IAAI,uBACZoB,EAAMC,iBAEN,IAAR,cACA,cAEQC,EAAMf,EAAI,EAAlB,sCACQe,EAAMd,GAAMY,EAAMG,QAAUC,SAASC,KAAKC,aAAgB,EAAI,EAE9DC,EAAUC,cAAcN,EAAOrC,GAE/B,IAAR,wBAEY4C,EAAWC,OAAS,GACtBC,MAAM,QAAUF,EAAW,GAAGG,OAAOjB,OAAOkB,eC/KuS,I,YCOzVC,EAAY,eACd,EACA,EACAhE,GACA,EACA,KACA,KACA,MAIa,aAAAgE,E","file":"js/chunk-2d0deb20.77a784fa.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{attrs:{\"id\":\"demo2\"}})])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div id=\"demo2\"></div>\n  </div>\n</template>\n\n\n<script>\nimport * as THREE from 'three';\nimport {OrbitControls} from 'three/examples/jsm/controls/OrbitControls'\n\nexport default {\n  name: 'demo-2',\n  methods: {\n    init() {\n      const container = document.getElementById('demo2');\n      const renderer = new THREE.WebGLRenderer();\n      renderer.setPixelRatio(window.devicePixelRatio);\n      // renderer.setClearColor(0xffffff, 1); //设置背景颜色\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      container.appendChild(renderer.domElement);\n\n\n      let scene = new THREE.Scene();\n      const camera = new THREE.PerspectiveCamera(90, window.innerWidth / window.innerHeight, 0.1, 100);\n\n      // 只需要那拿到xyz即可\n      camera.position.set(0, 0, 0.1)\n      // camera.position.x = -0.46777005030326513\n      // camera.position.y = 0.7928852740147417;\n      // camera.position.z = 1.3142379066996237;\n      // x: -0.46777005030326513\n      // y: 0.7928852740147417\n      // z: 1.3142379066996237\n\n\n      const controls = new OrbitControls(camera, renderer.domElement);\n      console.log('controls.position0', controls.position0, 'camera.position:', camera.position)\n      // controls.enableZoom = false;\n      // controls.enablePan = false;\n      // controls.enableDamping = true;\n      // controls.rotateSpeed = -0.25;\n\n\n      function renderByBox() {\n        const imgArr = [\n          '3d/images/scene_left.jpeg',\n          '3d/images/scene_right.jpeg',\n          '3d/images/scene_top.jpeg',\n          '3d/images/scene_bottom.jpeg',\n          '3d/images/scene_front.jpeg',\n          '3d/images/scene_back.jpeg',\n        ]\n        let materials = [];\n        for (let i = 0; i < imgArr.length; i++) {\n          const texture = new THREE.TextureLoader().load(imgArr[i]);\n          materials.push(new THREE.MeshBasicMaterial({map: texture}))\n        }\n\n        const box = new THREE.Mesh(new THREE.BoxGeometry(1, 1, 1), materials);\n        scene.add(box)\n        box.geometry.scale(1, 1, -1);\n      }\n\n      function renderBySphere() {\n        const sphereGeometry = new THREE.SphereGeometry(1, 50, 50);\n        sphereGeometry.scale(1, 1, -1);\n\n        const texture = new THREE.TextureLoader().load('3d/images/720yun_demo_panorama.jpg');\n        const sphereMaterial = new THREE.MeshBasicMaterial({map: texture});\n\n        const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);\n        scene.add(sphere)\n      }\n\n      let shape = 'box';\n      if (shape === 'box') {\n        renderByBox();\n      } else {\n        renderBySphere()\n      }\n      window.addEventListener('resize', onWindowResize);\n\n      function onWindowResize() {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n\n        renderer.setSize(window.innerWidth, window.innerHeight);\n\n      }\n\n\n      // function animate() {\n      //   console.log('animate camera', camera)\n      //   requestAnimationFrame(animate);\n      //\n      //   controls.update(); // required when damping is enabled\n      //\n      //   renderer.render(scene, camera);\n      //\n      // }\n      function render() {\n        renderer.render(scene, camera)\n        console.log('camera', camera.position.x, camera.position.y, camera.position.z)\n      }\n\n      render()\n      controls.addEventListener('change', render)\n\n      // animate()\n\n      return {scene, camera, container}\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      // this.init();\n      const {camera, scene, container} = this.init();\n\n      function renderPoints() {\n        const hotPoints = [{\n          position: {\n            x: 0,\n            y: 0,\n            z: -0.2\n          },\n          detail: {\n            \"title\": \"信息点1\"\n          }\n        },\n          {\n            position: {\n              x: -0.2,\n              y: -0.05,\n              z: 0.2\n            },\n            detail: {\n              \"title\": \"信息点2\"\n            }\n          }]\n        const pointTexture = new THREE.TextureLoader().load('3d/images/hot.png');\n        const material = new THREE.SpriteMaterial({map: pointTexture});\n\n        let poiObjects = [];\n        for (let i = 0; i < hotPoints.length; i++) {\n          const sprite = new THREE.Sprite(material);\n          sprite.scale.set(0.1, 0.1, 0.1);\n          const position = hotPoints[i].position\n          console.log('position', position)\n          sprite.position.set(position.x, position.y, position.z)\n\n          scene.add(sprite);\n\n          sprite.detail = hotPoints[i].detail;\n          poiObjects.push(sprite);\n        }\n        return poiObjects\n      }\n\n      const poiObjects = renderPoints();\n      container.addEventListener('click', function (event) {\n        console.log('container click1111');\n        event.preventDefault();\n\n        const raycaster = new THREE.Raycaster();\n        const mouse = new THREE.Vector2();\n\n        mouse.x = (event.clientX / document.body.clientWidth) * 2 - 1;\n        mouse.y = -(event.clientY / document.body.clientHeight) * 2 + 1;\n\n        raycaster.setFromCamera(mouse, camera)\n\n        const intersects = raycaster.intersectObjects(poiObjects);\n\n        if (intersects.length > 0) {\n          alert('点击了热点' + intersects[0].object.detail.title)\n        }\n      })\n    })\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Demo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Demo.vue?vue&type=template&id=70a003ec&\"\nimport script from \"./Demo.vue?vue&type=script&lang=js&\"\nexport * from \"./Demo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}