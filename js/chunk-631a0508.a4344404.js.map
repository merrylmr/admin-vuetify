{"version":3,"sources":["webpack:///./src/assets/js/utils.js","webpack:///./src/views/comps/Watermark.vue?c09d","webpack:///src/views/comps/Watermark.vue","webpack:///./src/views/comps/Watermark.vue?8cf3","webpack:///./src/views/comps/Watermark.vue","webpack:///./src/views/comps/Watermark.vue?6118"],"names":["watermarkFn","options","targetCls","display","targetOriginDom","document","querySelector","config","attributes","childList","subtree","parentDom","parentNode","adsInnerHTML","innerHTML","observeDom","targetDom","removeChild","window","observer","disconnect","div","createElement","className","setAttribute","appendChild","MutationObserver","WebKitMutationObserver","MozMutationObserver","callback","observe","mutationsList","mutation","type","console","log","attributeName","addEventListener","randomString","len","t","a","length","n","i","charAt","Math","floor","random","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","model","value","$$v","search","expression","headers","desserts","staticRenderFns","name","data","parentCls","mounted","component"],"mappings":"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","file":"js/chunk-631a0508.a4344404.js","sourcesContent":["export function watermarkFn(options = {targetCls: 'watermark', display: 'block'}) {\n    // 目标组件\n    const targetCls = options.targetCls;\n    let targetOriginDom = document.querySelector('.' + targetCls);\n    const config = {attributes: true, childList: true, subtree: true};\n    if (targetOriginDom) {\n        const parentDom = targetOriginDom.parentNode;\n        const adsInnerHTML = targetOriginDom.innerHTML;\n\n        const observeDom = () => {\n            let targetDom = document.querySelector('.' + targetCls);\n            if (targetDom) {\n                parentDom.removeChild(targetDom);\n            }\n            if (window.observer) {\n                window.observer.disconnect();\n            }\n\n            const div = document.createElement('div');\n            div.className = targetCls;\n            div.setAttribute('style', `display:${options.display}!important;visibility:visible!important;opacity:1!important;`);\n            div.innerHTML = adsInnerHTML;\n            parentDom.appendChild(div);\n            // 新添加的DOM之后，需要重新去添加DOM监听\n            const MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;\n            window.observer = new MutationObserver(callback);\n            window.observer.observe(div, config);\n        }\n        // 当观察到变动时执行的回调函数\n        const callback = function (mutationsList) {\n            for (let mutation of mutationsList) {\n                if (mutation.type === 'childList') {\n                    console.log('A child node has been added or removed.');\n                    observeDom()\n                } else if (mutation.type === 'attributes') {\n                    console.log('The ' + mutation.attributeName + ' attribute was modified.');\n                    observeDom();\n                }\n            }\n        };\n        observeDom();\n        // 滚动的时候去监听，如果被删除，则需要重新添加上\n        document.addEventListener('scroll', () => {\n            let targetDom = document.querySelector('.' + targetCls);\n            if (!targetDom) {\n                observeDom();\n            }\n        })\n    }\n}\n\n\n// 防抖：就是在触发事件后，等完成后间隔多久执行回调\nexport function debounce(fn, wait, immediate = false) {\n    // timeId需要放在函数外面，需要上一次的timeId\n    let timeId\n\n    return function (...params) {\n        if (timeId) clearTimeout(timeId)\n        const callNow = !timeId\n        if (immediate) {\n            timeId = setTimeout(() => {\n                timeId = null\n            }, wait)\n            if (callNow) fn.apply(this, params)\n        } else {\n            timeId = setTimeout(() => {\n                // 上下文 & 传参\n                fn.apply(this, params)\n            }, wait)\n        }\n    }\n}\n\n// 节流：间隔设置的时间执行回调，无论在这个间隔里面触发了几次\n// immediate:表示立即执行\nexport function throttle(fn, wait, immediate = false) {\n    let begin = 0, timer = null\n    // 闭包：可能存在上下文的问题this的问题\n    return function (...params) {\n        if (immediate) {\n            // 每次需要获取当前的时间\n            // 然后减去开始的时间'\n            const now = Date.now()\n            if (now - begin > wait) {\n                fn.apply(this, params)\n                begin = now\n            }\n        } else {\n            if (!timer) {\n                timer = setTimeout(() => {\n                    fn.apply(this, params)\n                    timer = null\n                }, wait)\n            }\n        }\n    }\n}\n\n\nexport function randomString(len = 16) {\n    const t = \"ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678\",\n        a = t.length;\n    let n = \"\";\n    for (let i = 0; i < len; i++) n += t.charAt(Math.floor(Math.random() * a));\n    return n\n}\n\n\n\n\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ma-4\"},[_c('div',{staticClass:\"text-h4\"},[_vm._v(\"前端实现水印\")]),_c('div',{staticClass:\"d-flex mt-4 align-center\"},[_vm._v(\" Nutrition \"),_c('v-spacer'),_c('v-text-field',{attrs:{\"append-icon\":\"mdi-magnify\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('div',{staticClass:\"table-wrapper\"},[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.desserts,\"search\":_vm.search}}),_c('div',{staticClass:\"watermark\"})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ma-4\">\n    <div class=\"text-h4\">前端实现水印</div>\n    <div class=\"d-flex mt-4 align-center\">\n      Nutrition\n      <v-spacer></v-spacer>\n      <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"Search\"\n          single-line\n          hide-details\n      ></v-text-field>\n    </div>\n    <div class=\"table-wrapper\">\n      <v-data-table\n          :headers=\"headers\"\n          :items=\"desserts\"\n          :search=\"search\"\n      ></v-data-table>\n      <div class=\"watermark\">\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {watermarkFn} from '@/assets/js/utils.js'\n\nexport default {\n  name: 'watermark',\n  data() {\n    return {\n      search: '',\n      headers: [\n        {\n          text: 'Dessert (100g serving)',\n          align: 'start',\n          sortable: false,\n          value: 'name',\n        },\n        {text: 'Calories', value: 'calories'},\n        {text: 'Fat (g)', value: 'fat'},\n        {text: 'Carbs (g)', value: 'carbs'},\n        {text: 'Protein (g)', value: 'protein'},\n        {text: 'Iron (%)', value: 'iron'},\n      ],\n      desserts: [\n        {\n          name: 'Frozen Yogurt',\n          calories: 159,\n          fat: 6.0,\n          carbs: 24,\n          protein: 4.0,\n          iron: '1%',\n        },\n        {\n          name: 'Ice cream sandwich',\n          calories: 237,\n          fat: 9.0,\n          carbs: 37,\n          protein: 4.3,\n          iron: '1%',\n        },\n        {\n          name: 'Eclair',\n          calories: 262,\n          fat: 16.0,\n          carbs: 23,\n          protein: 6.0,\n          iron: '7%',\n        },\n        {\n          name: 'Cupcake',\n          calories: 305,\n          fat: 3.7,\n          carbs: 67,\n          protein: 4.3,\n          iron: '8%',\n        },\n        {\n          name: 'Gingerbread',\n          calories: 356,\n          fat: 16.0,\n          carbs: 49,\n          protein: 3.9,\n          iron: '16%',\n        },\n        {\n          name: 'Jelly bean',\n          calories: 375,\n          fat: 0.0,\n          carbs: 94,\n          protein: 0.0,\n          iron: '0%',\n        },\n        {\n          name: 'Lollipop',\n          calories: 392,\n          fat: 0.2,\n          carbs: 98,\n          protein: 0,\n          iron: '2%',\n        },\n        {\n          name: 'Honeycomb',\n          calories: 408,\n          fat: 3.2,\n          carbs: 87,\n          protein: 6.5,\n          iron: '45%',\n        },\n        {\n          name: 'Donut',\n          calories: 452,\n          fat: 25.0,\n          carbs: 51,\n          protein: 4.9,\n          iron: '22%',\n        },\n        {\n          name: 'KitKat',\n          calories: 518,\n          fat: 26.0,\n          carbs: 65,\n          protein: 7,\n          iron: '6%',\n        },\n      ],\n      targetCls: 'watermark',\n      parentCls: 'table-wrapper',\n    }\n  },\n  mounted() {\n    watermarkFn({\n      targetCls: 'watermark', // 水印dom，默认watermark\n      display: 'block' // 水印的display;默认：block;\n    })\n  }\n}\n</script>\n\n\n<style lang=\"scss\">\n.table-wrapper {\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n  margin-top: 20px;\n}\n\n.watermark {\n  transform: rotate(20deg);\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  background: url('../../assets/logo.png');\n  pointer-events: none;\n  z-index: 0;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Watermark.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Watermark.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Watermark.vue?vue&type=template&id=fd773242&\"\nimport script from \"./Watermark.vue?vue&type=script&lang=js&\"\nexport * from \"./Watermark.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Watermark.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/sass-resources-loader/lib/loader.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Watermark.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}